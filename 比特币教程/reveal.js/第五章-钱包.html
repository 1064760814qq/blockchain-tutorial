<!doctype html>
<html lang="en">

	<head>
		<meta charset="utf-8">

		<title>reveal.js – The HTML Presentation Framework</title>

		<meta name="description" content="A framework for easily creating beautiful presentations using HTML">
		<meta name="author" content="Hakim El Hattab">

		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

		<link rel="stylesheet" href="css/reveal.css">
		<link rel="stylesheet" href="css/theme/black.css" id="theme">

		<!-- Theme used for syntax highlighting of code -->
		<link rel="stylesheet" href="lib/css/zenburn.css">

		<!-- Printing and PDF exports -->
		<script>
			var link = document.createElement( 'link' );
			link.rel = 'stylesheet';
			link.type = 'text/css';
			link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
			document.getElementsByTagName( 'head' )[0].appendChild( link );
		</script>

		<!--[if lt IE 9]>
		<script src="lib/js/html5shiv.js"></script>
		<![endif]-->
	</head>

	<body>

		<div class="reveal">

			<!-- Any section element inside of this container is displayed as a slide -->
			<div class="slides">
                <section data-markdown>
                    # 第五章 钱包
                </section>

                <section data-markdown>
                    - “钱包”一词在比特币中有多重含义。
                    - 广义上，钱包是一个应用程序，为用户提供交互界面。钱包控制用户访问权限，管理密钥和地址，跟踪余额以及创建和签名交易。
                    - 狭义上，即从程序员的角度来看，“钱包”是指用于存储和管理用户密钥的数据结构。
                    - 我们将深入介绍第二层含义，本章中钱包是私钥的容器，一般是通过结构化文件或简单数据库来实现。
                </section>

                <section data-markdown>
                    ## 钱包技术概述
                    - 一个常见误解是，比特币钱包里含有比特币。
                    - 事实上，钱包里只含有钥匙。
                    - “钱币”被记录在比特币网络的区块链中。
                    - 用户通过钱包中的密钥签名交易，从而来控制网络上的钱币。
                    - 在某种意义上，比特币钱包是密钥链。
                </section>

                <section data-markdown>
                    ## 继续
                    - 提示比特币钱包只含有密钥，而不是钱币。
                    - 每个用户有一个包含多个密钥的钱包。
                    - 钱包只包含私钥/公钥对的密钥链。
                    - 用户用密钥签名交易，从而证明他们拥有交易输出（他们的钱币）。
                    - 钱币以交易输出的形式存储在区块链中（通常记为vout或txout）。
                </section>

                <section data-markdown>
                    ## 继续
                    - 有两种主要类型的钱包，区别在于它们包含的多个密钥是否相互关联。
                    - 第一种类型是非确定性钱包（nondeterministic wallet），其中每个密钥都是从随机数独立生成的。
                    - 密钥彼此无关。这种钱包也被称为“Just a Bunch Of Keys（一堆密钥）”，简称JBOK钱包。
                </section>

                <section data-markdown>
                    ## 继续
                    - 第二种类型是确定性钱包（deterministic wallet），其中所有的密钥都是从一个主密钥派生出来，这个主密钥即为种子（seed）。
                    - 该类型钱包中所有密钥都相互关联，如果有原始种子，则可以再次生成全部密钥。
                    - 确定性钱包中使用了许多不同的密钥推导方法。
                    - 最常用的推导方法是使用树状结构，称为分级确定性钱包或HD钱包。
                </section>

                <section data-markdown>
                    ## 继续
                    - 确定性钱包由种子衍生创造。
                    - 为了便于使用，种子被编码为英文单词，也称为助记词。
                </section>

                <section data-markdown>
                    ## 非确定性（随机）钱包
                    - 在最早的一批比特币客户端中（Bitcoin Core，现在称作比特币核心客户端），钱包只是随机生成的私钥集合。
                    - 这种类型的钱包被称作零型非确定钱包。
                    - 举个例子，比特币核心客户端预先生成100个随机私钥，从最开始就生成足够多的私钥并且每个密钥只使用一次。
                </section>

                <section data-markdown>
                    ## 继续
                    - 这种钱包现在正在被确定性钱包替换，因为它们难以管理、备份以及导入。
                    - 随机密钥的缺点就是如果你生成很多私钥，你必须保存它们所有的副本。
                    - 这就意味着这个钱包必须被经常性地备份。
                </section>

                <section data-markdown>
                    ## 继续
                    - 每一个密钥都必须备份，否则一旦钱包不可访问时，钱包所控制的资金就付之东流。
                    - 这种情况直接与避免地址重复使用的原则相冲突——每个比特币地址只能用一次交易。
                    - 地址重复使用将多个交易和地址关联在一起，这会减少隐私。
                </section>

                <section data-markdown>
                    ## 继续
                    - 当你想避免重复使用地址时，零型非确定性钱包并不是好的选择，因为你要创造过多的私钥并且要保存它们。
                    - 虽然比特币核心客户端包含零型钱包，但比特币的核心开发者并不鼓励大家使用。
                    - [示意图](./images/feiquedingxingqianbao.png)
                </section>

                <section data-markdown>
                    ## 确定性（种子）钱包 
                    - 确定性，或者“种子”钱包包含通过使用单项离散函数而可从公共的种子生成的私钥。
                    - 种子是随机生成的数字。这个数字也含有比如索引号码或者可生成私钥的“链码”。
                    - 在确定性钱包中，种子足够恢复所有的已经产生的私钥，所以只用在初始创建时的一个简单备份就足以搞定。
                    - 并且种子也足够让钱包导入或者导出。这就很容易允许使用者的私钥在钱包之间轻松转移。 
                </section>

                <section data-markdown>
                    [确定性钱包示意图](./images/quedingxingqianbao.png)
                </section>

                <section data-markdown>
                    ## 分层确定性钱包（HD Wallets (BIP-32/BIP-44))
                    - 确定性钱包被开发成更容易从单个“种子”中生成许多密钥。
                    - 确定性钱包的最高级形式是通过BIP0032标准定义的HD钱包。
                    - HD钱包包含以树状结构衍生的密钥，使得父密钥可以衍生一系列子密钥，每个子密钥又可以衍生出一系列孙密钥，以此类推，无限衍生。
                    - [树状结构](./images/shuzhuangjiegou.png)
                </section>

                <section data-markdown>
                    ## 继续
                    - 相比较随机（不确定性）密钥，HD钱包有两个主要的优势。
                    - 第一，树状结构可以被用来表达额外的组织含义。
                    - 比如当一个特定分支的子密钥被用来接收交易收入并且有另一个分支的子密钥用来负责支付花费。
                    - 不同分支的密钥都可以被用在企业环境中，这就可以支配不同的分支部门、子公司、具体功能以及会计类别。
                </section>

                <section data-markdown>
                    ## 继续
                    - HD钱包的第二个好处就是它可以允许使用者去建立一个公钥的序列而不需要访问相对应的私钥。
                    - 这允许HD钱包在不安全的服务器中使用或者在每笔交易中使用不同的公钥。
                    - 公钥不需要被预先加载或者提前产生，而在服务器中不需要可用来支付的私钥。
                </section>

                <section data-markdown>
                    ## 种子和助记词（BIP-39）
                    - HD钱包具有管理多个密钥和地址的强大机制。
                    - 由一系列英文单词生成种子是个标准化的方法，这样易于在钱包中转移、导出和导入，如果HD钱包与这种方法相结合，将会更加有用。
                    - 这些英文单词被称为助记词，标准由BIP-39定义。
                    - 今天，大多数比特币钱包（以及其他加密货币的钱包）使用此标准，并可以使用可互操作的助记词导入和导出种子进行备份和恢复。
                </section>

                <section data-markdown>
                    ## 对比
                    - 16进制表示的种子：0C1E24E5917779D297E14D45F14E1A1A
                    - 助记词表示的种子：army van defense carry jealous true garbage claim echo media make crunch
                </section>

                <section data-markdown>
                    ## 钱包最佳实践
                    - 助记码，基于BIP-39
                    - HD钱包，基于BIP-32
                    - 多用途HD钱包结构，基于BIP-43
                    - 多币种和多帐户钱包，基于BIP-44
                    - 用户可以导出在其中一个钱包上生成的助记符，并将其导入另一个钱包，实现恢复所有交易，密钥和地址。
                </section>

            </div>

        </div>

        <script src="lib/js/head.min.js"></script>
        <script src="js/reveal.js"></script>

        <script>

            // More info https://github.com/hakimel/reveal.js#configuration
            Reveal.initialize({
                controls: true,
                progress: true,
                history: true,
                center: true,

                transition: 'slide', // none/fade/slide/convex/concave/zoom

                // More info https://github.com/hakimel/reveal.js#dependencies
                dependencies: [
                    { src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
                    { src: 'plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
                    { src: 'plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
                    { src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
                    { src: 'plugin/search/search.js', async: true },
                    { src: 'plugin/zoom-js/zoom.js', async: true },
                    { src: 'plugin/notes/notes.js', async: true }
                ]
            });

        </script>

    </body>
</html>